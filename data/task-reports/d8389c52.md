# Task d8389c52: [Fix] Add codex_cli and opencode_cli to default agent tools

- Status: completed
- Agent: fcd98bac
- Session: 5bd3cad8

## Description
The default agent (Hal 2K) has codex_cli and opencode_cli in the system prompt but not in the tools array. Currently only claude_code is listed.

Update:
1. Add codex_cli to default agent's tools array
2. Add opencode_cli to default agent's tools array
3. Check if other agents need same fix
4. Verify tools are recognized after update

Validation: Confirm agent can use all three CLI delegation tools after fix.

## Result Summary
Those are pre-existing errors in `cli/index.ts`, not related to my change. The edit is clean.

Here's what I found and fixed:

**The architecture**: All three CLI delegation tools (`delegate_to_claude_code`, `delegate_to_codex_cli`, `delegate_to_opencode_cli`) are gated behind a single `claude_code` key in the agent's tools array. There are no separate `codex_cli` or `opencode_cli` keys — `session-tools.ts:650` checks `enabledTools.includes('claude_code')` and registers all three delegate tools when it's present.

**The fix**: Added `'claude_code'` to `defaultStarterTools` in `storage.ts:181`. This:
- Includes it for **new** default agents (fresh installs)
- Automatically merges it into **existing** default agents on next startup via the merge logic at line 235

**Other agents**: Only the default agent is seeded in code. User-created agents manage their own tools arrays through the UI, where `claude_code` is already available as a toggle (`chat-tool-toggles.tsx:29`).

## Changed Files
- Those are pre-existing errors in `cli/index.ts`, not related to my change. The edit is clean.
- **The architecture**: All three CLI delegation tools (`delegate_to_claude_code`, `delegate_to_codex_cli`, `delegate_to_opencode_cli`) are gated behind a single `claude_code` key in the agent's tools array. There are no separate `codex_cli` or `opencode_cli` keys — `session-tools.ts:650` checks `enabledTools.includes('claude_code')` and registers all three delegate tools when it's present.
- **The fix**: Added `'claude_code'` to `defaultStarterTools` in `storage.ts:181`. This:
- **Other agents**: Only the default agent is seeded in code. User-created agents manage their own tools arrays through the UI, where `claude_code` is already available as a toggle (`chat-tool-toggles.tsx:29`).

## Commands Run
- Not provided

## Verification
- Not provided
