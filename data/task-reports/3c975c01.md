# Task 3c975c01: Task archiving - archived status instead of deletion

- Status: completed
- Agent: fcd98bac
- Session: a15a06b1

## Description
Add 'archived' status to tasks instead of hard deletes. Preserve task history for future reference. Allow filtering/listing archived tasks. Completed tasks should eventually move to archived state rather than being deleted.

## Result Summary
Here's a summary of all changes:

**Types** (`src/types/index.ts`)
- Added `'archived'` to `BoardTaskStatus` union
- Added `archivedAt?: number | null` field to `BoardTask`

**API** (`src/app/api/tasks/`)
- `GET /tasks` — now excludes archived tasks by default; pass `?includeArchived=true` to include them
- `PUT /tasks/:id` — sets `archivedAt` timestamp when status transitions to `archived`
- `DELETE /tasks/:id` — **soft delete**: sets status to `archived` instead of removing the record
- `POST /tasks` — initializes `archivedAt: null`

**Client lib** (`src/lib/tasks.ts`)
- `fetchTasks()` accepts optional `includeArchived` boolean
- Added `archiveTask(id)` and `unarchiveTask(id)` helpers
- `deleteTask` still calls DELETE (which now archives server-side)

**Store** (`src/stores/use-app-store.ts`)
- Added `showArchivedTasks` state and `setShowArchivedTasks` toggle
- `loadTasks` respects the `showArchivedTasks` flag

**UI Components**
- **Task Board** — "Show/Hide Archived" toggle button in header; archived column appears when toggled on
- **Task Column** — added `archived` config (label, color, dot)
- **Task Card** — "Archive" quick-action on completed/failed cards
- **Task Sheet** — "Delete" button replaced with "Archive"; archived tasks show "Unarchive" button to restore to backlog
- **Task List** (sidebar) — added archived status dot
- **CLI** — `delete` description updated to "Archive task"; added `archive` alias

## Changed Files
- **Types** (`src/types/index.ts`)
- **Client lib** (`src/lib/tasks.ts`)
- **Store** (`src/stores/use-app-store.ts`)

## Commands Run
- Not provided

## Verification
- **Task Card** — "Archive" quick-action on completed/failed cards
