# Task 4abec697: [Feature] Context pressure indicator

- Status: completed
- Agent: fcd98bac
- Session: ce3af9ba

## Description
Real-time gauge showing context usage percentage. Auto-suggest compacting when threshold hit (e.g. 80%). Show what would be summarized before compacting. Prevents 'I forgot everything' moments.

## Result Summary
The plan adds 7 file touches (3 new, 4 modified) to build a context usage gauge that:

- **Shows a live bar** in the chat header sub-bar with color-coded fill (green/amber/red)
- **Gets data two ways**: client-side estimation between turns + server-reconciled values piggybacked on the existing SSE `md` event
- **Suggests compaction** via a clickable popover at 70%+ showing which messages would be summarized
- **Offers manual "Compact Now"** via a new API endpoint reusing the existing `summarizeAndCompact()` logic

The key architectural choice is a client-safe `context-utils.ts` file that replicates the pure estimation functions from `context-manager.ts` — avoiding importing server-only dependencies (`memory-db`) into the client bundle.

## Changed Files
- The key architectural choice is a client-safe `context-utils.ts` file that replicates the pure estimation functions from `context-manager.ts` — avoiding importing server-only dependencies (`memory-db`) into the client bundle.

## Commands Run
- Not provided

## Verification
- The plan adds 7 file touches (3 new, 4 modified) to build a context usage gauge that:
